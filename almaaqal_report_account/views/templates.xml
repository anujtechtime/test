<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_new_report">
        <t t-call="web.html_container">
            <t t-set="data_report_margin_top" t-value="12"/>
            <t t-set="data_report_header_spacing" t-value="9"/>
            <t t-set="data_report_dpi" t-value="110"/>
            <t t-call="web.internal_layout">
            <!--<t t-call="web.external_layout">  -->
                <div class="page" style="margin-top : 60px !important;">
                    <h4 class="text-center">  جامعة المعقل الاهلية /البصرة</h4>
                    <h4 class="text-center" style="margin-bottom : 60px;">  <span t-esc="data['date_from'].split('-')[0]"/>كشف العمليات الجارية للسنة المالية المنتهية في </h4>
                    <table class="table table-sm table-reports mt4" style="margin-top : 30px;">
                        <thead>
                            <tr>
                                <th class="text-right"><span t-esc="data['date_from'].split('-')[0]"/></th>
                                <th class="text-right"><span t-esc="data['date_to'].split('-')[0]"/></th>
                                <th class="text-right">اسم الحساب</th>
                                <th class="text-right">رقم الدليل المحاسبي</th>
                            </tr>
                        </thead>
                        <tbody>
                        <t t-set="code_value_43" t-value="43"/>
                        <t t-set="code_value_225" t-value="225"/>

                        <t t-set="code_value_48" t-value="48"/>
                        <t t-set="code_value_49" t-value="49"/>
                        <t t-set="code_value_38" t-value="38"/>
                        <t t-set="code_value_39" t-value="39"/>

                          <t t-set="code_value_31" t-value="31"/>
                          <t t-set="code_value_32" t-value="32"/>
                          <t t-set="code_value_33" t-value="33"/>
                          <t t-set="code_value_34" t-value="34"/>
                          <t t-set="code_value_37" t-value="37"/>
                          <t t-set="code_value_384" t-value="384"/> 

                            <t t-set="total_225" t-value="0"/>
                            <t t-set="total_43" t-value="0"/>

                            <t t-set="total_48" t-value="0"/>
                            <t t-set="total_49" t-value="0"/>
                            <t t-set="total_38" t-value="0"/>
                            <t t-set="total_39" t-value="0"/>

                            <t t-set="total_31" t-value="0"/>
                            <t t-set="total_32" t-value="0"/>
                            <t t-set="total_33" t-value="0"/>
                            <t t-set="total_34" t-value="0"/>
                            <t t-set="total_37" t-value="0"/>
                            <t t-set="total_384" t-value="0"/>


                            <t t-set="total_pre_225" t-value="0"/>
                            <t t-set="total_pre_43" t-value="0"/>
                            <t t-set="total_pre_48" t-value="0"/>
                            <t t-set="total_pre_49" t-value="0"/>
                            <t t-set="total_pre_38" t-value="0"/>
                            <t t-set="total_pre_39" t-value="0"/>
                            <t t-set="total_pre_31" t-value="0"/>
                            <t t-set="total_pre_32" t-value="0"/>
                            <t t-set="total_pre_33" t-value="0"/>
                            <t t-set="total_pre_34" t-value="0"/>
                            <t t-set="total_pre_37" t-value="0"/>
                            <t t-set="total_pre_384" t-value="0"/>
                            <t t-foreach="Accounts" t-as="account">
                            

                            <t t-if="account['code'][:2] == '225'">
                                <t t-set="total_225" t-value="int(total_225) + int(account['curr_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '43'">
                                <t t-set="total_43" t-value="int(total_43) + int(account['curr_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '48'">
                                <t t-set="total_48" t-value="int(total_48) + int(account['curr_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '49'">
                                <t t-set="total_49" t-value="int(total_49) + int(account['curr_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '38'">
                                <t t-set="total_38" t-value="int(total_38) + int(account['curr_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '43'">
                                <t t-set="total_39" t-value="int(total_39) + int(account['curr_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '31'">
                                <t t-set="total_31" t-value="int(total_31) + int(account['curr_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '32'">
                                <t t-set="total_32" t-value="int(total_32) + int(account['curr_year_balance'])"/>
                            </t>
                            <t t-if="account['code'][:2] == '33'">
                                <t t-set="total_33" t-value="int(total_33) + int(account['curr_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:2] == '34'">
                                <t t-set="total_34" t-value="int(total_34) + int(account['curr_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:2] == '37'">
                                <t t-set="total_37" t-value="int(total_37) + int(account['curr_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:3] == '384'">
                                <t t-set="total_384" t-value="int(total_384) + int(account['curr_year_balance'])"/>
                            </t>





                             

                            <t t-if="account['code'][:2] == '225'">
                                <t t-set="total_pre_225" t-value="int(total_pre_225) + int(account['prev_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '43'">
                                <t t-set="total_pre_43" t-value="int(total_pre_43) + int(account['prev_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '48'">
                                <t t-set="total_pre_48" t-value="int(total_pre_48) + int(account['prev_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '49'">
                                <t t-set="total_pre_49" t-value="int(total_pre_49) + int(account['prev_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '38'">
                                <t t-set="total_pre_38" t-value="int(total_pre_38) + int(account['prev_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '43'">
                                <t t-set="total_pre_39" t-value="int(total_pre_39) + int(account['prev_year_balance'])"/> 
                            </t>

                            <t t-if="account['code'][:2] == '31'">
                                <t t-set="total_pre_31" t-value="int(total_pre_31) + int(account['prev_year_balance'])"/> 
                            </t>
                            <t t-if="account['code'][:2] == '32'">
                                <t t-set="total_pre_32" t-value="int(total_pre_32) + int(account['prev_year_balance'])"/>
                            </t>
                            <t t-if="account['code'][:2] == '33'">
                                <t t-set="total_pre_33" t-value="int(total_pre_33) + int(account['prev_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:2] == '34'">
                                <t t-set="total_pre_34" t-value="int(total_pre_34) + int(account['prev_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:2] == '37'">
                                <t t-set="total_pre_37" t-value="int(total_pre_37) + int(account['prev_year_balance'])"/>
                            </t>

                            <t t-if="account['code'][:3] == '384'">
                                <t t-set="total_pre_384" t-value="int(total_384) + int(account['prev_year_balance'])"/>
                            </t>
                            

                            </t>







                            <tr>
                                <td class="text-right">
                                    <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style">4</span>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_43" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_43" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_43"/>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right">
                                    <span/>
                                </td>
                                <td class="text-right">
                                    <span/>
                                </td>
                                <td class="text-right">
                                <span>المصروفات الجارية</span>
                                </td>
                                <td class="text-right">
                                    <span/>
                                </td>
                            </tr>   







                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_31" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_31" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_31"/>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_32" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_32" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_32"/>
                                </td>
                            </tr>    

                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_33" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_33" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_33"/>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_34" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_34" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_34"/>
                                </td>
                            </tr>   


                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_37" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_37" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_37"/>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_pre_384" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="total_384" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                                </td>
                                <td class="text-right">
                                <span/>
                                </td>
                                <td class="text-right">
                                    <span t-att-style="style" t-esc="code_value_384"/>
                                </td>
                            </tr>   

                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="total_pre_31 + total_pre_32 + total_pre_33 + total_pre_34 + total_pre_37 + total_pre_384"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="total_31 + total_32 + total_33 + total_34 + total_37 + total_384"/></td>
                                <td class="text-right" colspan="2">مجموع المصروفات الجارية</td>
                            </tr>

                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="total_pre_31 + total_pre_32 + total_pre_33 + total_pre_34 + total_pre_37 + total_pre_384 - total_pre_43"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="total_31 + total_32 + total_33 + total_34 + total_37 + total_384 - total_43"/></td>
                                <td class="text-right" colspan="2">فائض العمليات التجارية(المرحلة الاولى)</td>
                            </tr>
                            

                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_pre_225))"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_225))"/></td>
                                <td class="text-right" colspan="2">(ينزل العجز المتراكم من السنوات السابقة)</td>

                            </tr>


                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_pre_31 + total_pre_32 + total_pre_33 + total_pre_34 + total_pre_37 + total_pre_384 - total_pre_43 - total_pre_225))"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_31 + total_32 + total_33 + total_34 + total_37 + total_384 - total_43 - total_pre_225))"/></td>
                                <td class="text-right" colspan="2">فائض المرحلة الاولى بعد معاجة العجز المتراكم</td>

                            </tr>


                            <tr>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_pre_48" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_48" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                            <span/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="code_value_48"/>
                            </td>
                            </tr> 

                            <tr>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_pre_49" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_49" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                            <span/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="code_value_49"/>
                            </td>
                            </tr>


                             <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_pre_31))"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_31))"/></td>
                                <td class="text-right" colspan="2">تنزل :المصروفات التحويلية والاخرى</td>

                            </tr>


                            <tr>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_pre_38 - total_pre_384" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_38 - total_384" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                            <span/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="code_value_38"/>
                            </td>
                            </tr> 
                        
                            <tr>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_pre_39" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="total_39" t-options="{'widget': 'monetary', 'display_currency': env.company.currency_id}"/>
                            </td>
                            <td class="text-right">
                            <span/>
                            </td>
                            <td class="text-right">
                                <span t-att-style="style" t-esc="code_value_39"/>
                            </td>
                            </tr> 


                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_pre_39 - total_pre_38 - total_pre_384))"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_39 - total_38 - total_384))"/></td>
                                <td class="text-right" colspan="2">مجموع المصروفات التحويلية </td>

                            </tr>
                        
                            <tr>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_pre_31 + total_pre_32 + total_pre_33 + total_pre_34 + total_pre_37 + total_pre_384 - total_pre_43 - total_pre_225 + total_pre_48 + total_pre_49))"/></td>
                                <td class="text-right"><span t-att-style="style" t-esc="('{:,}'.format(total_31 + total_32 + total_33 + total_34 + total_37 + total_384 - total_43 - total_225 + total_48 + total_49))"/></td>
                                <td class="text-right" colspan="2">فائض العمليات الجارية (المرحلة الثانية)</td>

                            </tr>



                        </tbody>
                    </table>

                </div>
            
             
                
            </t>
        </t>

    </template>
</odoo>
